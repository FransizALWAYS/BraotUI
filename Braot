-- Version 1.0
-- Got the idea from fluent ui.
--Made by : expresso5184 | discord.

local BraotUI = {}
BraotUI.Version = "1.0"

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

-- Themes
local Themes = {
    Dark = {
        Background = Color3.fromRGB(30, 30, 30),
        Accent = Color3.fromRGB(0, 122, 255),
        Text = Color3.fromRGB(255, 255, 255),
        Secondary = Color3.fromRGB(45, 45, 45),
        Border = Color3.fromRGB(60, 60, 60),
        Highlight = Color3.fromRGB(50, 50, 50),
    },
    Light = {
        Background = Color3.fromRGB(240, 240, 240),
        Accent = Color3.fromRGB(0, 122, 255),
        Text = Color3.fromRGB(0, 0, 0),
        Secondary = Color3.fromRGB(220, 220, 220),
        Border = Color3.fromRGB(200, 200, 200),
        Highlight = Color3.fromRGB(230, 230, 230),
    },
    -- you can add more themes here
}

BraotUI.Options = {} -- To store options for saving/loading

-- Utility Functions
local function CreateInstance(class, props)
    local inst = Instance.new(class)
    for prop, value in pairs(props or {}) do
        inst[prop] = value
    end
    return inst
end

local function Tween(inst, props, duration, easing)
    local tweenInfo = TweenInfo.new(duration or 0.2, easing or Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tween = TweenService:Create(inst, tweenInfo, props)
    tween:Play()
    return tween
end

local function RippleEffect(button)
    local ripple = CreateInstance("Frame", {
        Parent = button,
        BackgroundColor3 = Color3.fromRGB(255, 255, 255),
        BackgroundTransparency = 0.8,
        Size = UDim2.new(0, 0, 0, 0),
        AnchorPoint = Vector2.new(0.5, 0.5),
        Position = UDim2.new(0.5, 0, 0.5, 0),
        ZIndex = 10,
    })
    local corner = CreateInstance("UICorner", {CornerRadius = UDim.new(1, 0), Parent = ripple})
    Tween(ripple, {Size = UDim2.new(2, 0, 2, 0), BackgroundTransparency = 1}, 0.5)
    delay(0.5, function() ripple:Destroy() end)
end

-- Notification System
function BraotUI:Notify(options)
    local title = options.Title or "Notification"
    local content = options.Content or ""
    local subContent = options.SubContent or ""
    local duration = options.Duration or 5

    local notifyGui = CreateInstance("ScreenGui", {Parent = game.CoreGui, Name = "BraotUINotify"})
    local frame = CreateInstance("Frame", {
        Parent = notifyGui,
        BackgroundColor3 = Themes.Dark.Background,
        Size = UDim2.new(0, 300, 0, 80),
        Position = UDim2.new(1, -320, 1, -100),
        BorderSizePixel = 0,
    })
    CreateInstance("UICorner", {CornerRadius = UDim.new(0, 8), Parent = frame})
    CreateInstance("UIStroke", {Color = Themes.Dark.Border, Transparency = 0.5, Parent = frame})

    local titleLabel = CreateInstance("TextLabel", {
        Parent = frame,
        Text = title,
        Font = Enum.Font.GothamBold,
        TextSize = 14,
        TextColor3 = Themes.Dark.Text,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 0, 20),
        Position = UDim2.new(0, 10, 0, 5),
    })

    local contentLabel = CreateInstance("TextLabel", {
        Parent = frame,
        Text = content,
        Font = Enum.Font.Gotham,
        TextSize = 12,
        TextColor3 = Themes.Dark.Text,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, -20, 0, 40),
        Position = UDim2.new(0, 10, 0, 25),
        TextWrapped = true,
    })

    if subContent ~= "" then
        local subLabel = CreateInstance("TextLabel", {
            Parent = frame,
            Text = subContent,
            Font = Enum.Font.Gotham,
            TextSize = 10,
            TextColor3 = Themes.Dark.Secondary,
            BackgroundTransparency = 1,
            Size = UDim2.new(1, -20, 0, 20),
            Position = UDim2.new(0, 10, 0, 65),
            TextWrapped = true,
        })
    end

    Tween(frame, {Position = UDim2.new(1, -320, 1, -100 - frame.AbsoluteSize.Y - 10)}, 0.3) -- Slide in
    if duration then
        delay(duration, function()
            Tween(frame, {Position = UDim2.new(1, 0, 1, -100 - frame.AbsoluteSize.Y - 10)}, 0.3).Completed:Connect(function()
                notifyGui:Destroy()
            end)
        end)
    end
end

-- Dialog System
function BraotUI:Dialog(options)
    local title = options.Title or "Dialog"
    local content = options.Content or ""
    local buttons = options.Buttons or {}

    local dialogGui = CreateInstance("ScreenGui", {Parent = game.CoreGui, Name = "BraotUIDialog"})
    local backdrop = CreateInstance("Frame", {
        Parent = dialogGui,
        BackgroundColor3 = Color3.fromRGB(0, 0, 0),
        BackgroundTransparency = 0.5,
        Size = UDim2.new(1, 0, 1, 0),
    })

    local frame = CreateInstance("Frame", {
        Parent = backdrop,
        BackgroundColor3 = Themes.Dark.Background,
        Size = UDim2.new(0, 300, 0, 150),
        Position = UDim2.new(0.5, -150, 0.5, -75),
        BorderSizePixel = 0,
    })
    CreateInstance("UICorner", {CornerRadius = UDim.new(0, 8), Parent = frame})
    CreateInstance("UIStroke", {Color = Themes.Dark.Border, Transparency = 0.5, Parent = frame})

    local titleLabel = CreateInstance("TextLabel", {
        Parent = frame,
        Text = title,
        Font = Enum.Font.GothamBold,
        TextSize = 16,
        TextColor3 = Themes.Dark.Text,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 0, 30),
        Position = UDim2.new(0, 10, 0, 10),
    })

    local contentLabel = CreateInstance("TextLabel", {
        Parent = frame,
        Text = content,
        Font = Enum.Font.Gotham,
        TextSize = 14,
        TextColor3 = Themes.Dark.Text,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, -20, 0, 60),
        Position = UDim2.new(0, 10, 0, 40),
        TextWrapped = true,
    })

    local buttonContainer = CreateInstance("Frame", {
        Parent = frame,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 0, 40),
        Position = UDim2.new(0, 0, 1, -40),
    })

    for i, btn in ipairs(buttons) do
        local button = CreateInstance("TextButton", {
            Parent = buttonContainer,
            Text = btn.Title,
            Font = Enum.Font.GothamSemibold,
            TextSize = 14,
            TextColor3 = Themes.Dark.Text,
            BackgroundColor3 = Themes.Dark.Accent,
            Size = UDim2.new(1/#buttons, -5, 1, -5),
            Position = UDim2.new((i-1)/#buttons, 5, 0, 5),
            AutoButtonColor = false,
        })
        CreateInstance("UICorner", {CornerRadius = UDim.new(0, 6), Parent = button})

        button.MouseButton1Click:Connect(function()
            if btn.Callback then btn.Callback() end
            Tween(frame, {Transparency = 1}, 0.2).Completed:Connect(function()
                dialogGui:Destroy()
            end)
        end)

        button.MouseEnter:Connect(function()
            Tween(button, {BackgroundColor3 = Themes.Dark.Highlight}, 0.1)
        end)
        button.MouseLeave:Connect(function()
            Tween(button, {BackgroundColor3 = Themes.Dark.Accent}, 0.1)
        end)
    end

    Tween(frame, {Transparency = 0}, 0.3) -- Fade in
end

-- Create Window
function BraotUI:CreateWindow(options)
    local title = options.Title or "BraotUI"
    local subTitle = options.SubTitle or ""
    local tabWidth = options.TabWidth or 160
    local size = options.Size or UDim2.fromOffset(580, 460)
    local acrylic = options.Acrylic or false
    local theme = options.Theme or "Dark"
    local minimizeKey = options.MinimizeKey or Enum.KeyCode.LeftControl
    local minimizeKeybind = options.MinimizeKeybind -- If set, uses this instead

    BraotUI.CurrentTheme = Themes[theme] or Themes.Dark

    local screenGui = CreateInstance("ScreenGui", {Parent = game.CoreGui, Name = "BraotUI"})
    local mainFrame = CreateInstance("Frame", {
        Parent = screenGui,
        BackgroundColor3 = BraotUI.CurrentTheme.Background,
        Size = size,
        Position = UDim2.new(0.5, -size.X.Offset/2, 0.5, -size.Y.Offset/2),
        BorderSizePixel = 0,
        ClipsDescendants = true,
    })
    CreateInstance("UICorner", {CornerRadius = UDim.new(0, 8), Parent = mainFrame})
    CreateInstance("UIStroke", {Color = BraotUI.CurrentTheme.Border, Transparency = 0.2, Parent = mainFrame})

    if acrylic then
        local blur = CreateInstance("DepthOfFieldEffect", {Parent = game.Lighting, FarIntensity = 0.1, FocusDistance = 50, InFocusRadius = 50, NearIntensity = 0.1})
        BraotUI.Blur = blur
    end

    local titleBar = CreateInstance("Frame", {
        Parent = mainFrame,
        BackgroundColor3 = BraotUI.CurrentTheme.Secondary,
        Size = UDim2.new(1, 0, 0, 40),
        BorderSizePixel = 0,
    })
    CreateInstance("UICorner", {CornerRadius = UDim.new(0, 8), Parent = titleBar, CornerRadius = UDim.new(0, 8)})

    local titleLabel = CreateInstance("TextLabel", {
        Parent = titleBar,
        Text = title .. " " .. subTitle,
        Font = Enum.Font.GothamBold,
        TextSize = 16,
        TextColor3 = BraotUI.CurrentTheme.Text,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, -40, 1, 0),
        Position = UDim2.new(0, 10, 0, 0),
    })

    local closeButton = CreateInstance("TextButton", {
        Parent = titleBar,
        Text = "X",
        Font = Enum.Font.GothamBold,
        TextSize = 16,
        TextColor3 = BraotUI.CurrentTheme.Text,
        BackgroundTransparency = 1,
        Size = UDim2.new(0, 40, 1, 0),
        Position = UDim2.new(1, -40, 0, 0),
    })
    closeButton.MouseButton1Click:Connect(function()
        if BraotUI.Blur then BraotUI.Blur:Destroy() end
        Tween(mainFrame, {Transparency = 1}, 0.3).Completed:Connect(function()
            screenGui:Destroy()
        end)
    end)

    local tabContainer = CreateInstance("ScrollingFrame", {
        Parent = mainFrame,
        BackgroundTransparency = 1,
        Size = UDim2.new(0, tabWidth, 1, -40),
        Position = UDim2.new(0, 0, 0, 40),
        CanvasSize = UDim2.new(0, 0, 0, 0),
        ScrollBarThickness = 0,
    })

    local tabLayout = CreateInstance("UIListLayout", {Parent = tabContainer, FillDirection = Enum.FillDirection.Vertical, Padding = UDim.new(0, 5)})

    local contentContainer = CreateInstance("Frame", {
        Parent = mainFrame,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, -tabWidth, 1, -40),
        Position = UDim2.new(0, tabWidth, 0, 40),
    })

    local tabs = {}
    local currentTab = nil

    local function SelectTab(tab)
        if currentTab then
            currentTab.Frame.Visible = false
            Tween(currentTab.Button, {BackgroundColor3 = BraotUI.CurrentTheme.Background}, 0.2)
        end
        tab.Frame.Visible = true
        Tween(tab.Button, {BackgroundColor3 = BraotUI.CurrentTheme.Highlight}, 0.2)
        currentTab = tab
    end

    local window = {}

    function window:AddTab(tabOptions)
        local title = tabOptions.Title or "Tab"
        local icon = tabOptions.Icon or ""

        local tabButton = CreateInstance("TextButton", {
            Parent = tabContainer,
            Text = icon .. " " .. title,
            Font = Enum.Font.GothamSemibold,
            TextSize = 14,
            TextColor3 = BraotUI.CurrentTheme.Text,
            BackgroundColor3 = BraotUI.CurrentTheme.Background,
            Size = UDim2.new(1, -10, 0, 40),
            Position = UDim2.new(0, 5, 0, 0),
            AutoButtonColor = false,
        })
        CreateInstance("UICorner", {CornerRadius = UDim.new(0, 6), Parent = tabButton})

        local tabFrame = CreateInstance("ScrollingFrame", {
            Parent = contentContainer,
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 1, 0),
            Visible = false,
            CanvasSize = UDim2.new(0, 0, 0, 0),
            ScrollBarThickness = 4,
            ScrollBarImageColor3 = BraotUI.CurrentTheme.Border,
        })
        local tabLayout = CreateInstance("UIListLayout", {Parent = tabFrame, Padding = UDim.new(0, 10), SortOrder = Enum.SortOrder.LayoutOrder})

        tabLayout.Changed:Connect(function()
            tabFrame.CanvasSize = UDim2.new(0, 0, 0, tabLayout.AbsoluteContentSize.Y + 20)
        end)

        tabButton.MouseButton1Click:Connect(function()
            SelectTab({Button = tabButton, Frame = tabFrame})
        end)

        table.insert(tabs, {Button = tabButton, Frame = tabFrame})

        if #tabs == 1 then
            SelectTab(tabs[1])
        end

        local tab = {}

        function tab:AddParagraph(paraOptions)
            local title = paraOptions.Title or "Paragraph"
            local content = paraOptions.Content or ""

            local paraFrame = CreateInstance("Frame", {
                Parent = tabFrame,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, 0, 0, 50),
            })

            local paraTitle = CreateInstance("TextLabel", {
                Parent = paraFrame,
                Text = title,
                Font = Enum.Font.GothamBold,
                TextSize = 14,
                TextColor3 = BraotUI.CurrentTheme.Text,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, 0, 0, 20),
            })

            local paraContent = CreateInstance("TextLabel", {
                Parent = paraFrame,
                Text = content,
                Font = Enum.Font.Gotham,
                TextSize = 12,
                TextColor3 = BraotUI.CurrentTheme.Text,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, 0, 0, 30),
                Position = UDim2.new(0, 0, 0, 20),
                TextWrapped = true,
            })

            paraFrame.Size = UDim2.new(1, 0, 0, paraTitle.AbsoluteSize.Y + paraContent.TextBounds.Y + 10)
        end

        function tab:AddButton(btnOptions)
            local title = btnOptions.Title or "Button"
            local desc = btnOptions.Description or ""
            local callback = btnOptions.Callback or function() end

            local btnFrame = CreateInstance("Frame", {
                Parent = tabFrame,
                BackgroundColor3 = BraotUI.CurrentTheme.Secondary,
                Size = UDim2.new(1, -20, 0, desc == "" and 40 or 60),
                Position = UDim2.new(0, 10, 0, 0),
            })
            CreateInstance("UICorner", {CornerRadius = UDim.new(0, 6), Parent = btnFrame})

            local btnTitle = CreateInstance("TextLabel", {
                Parent = btnFrame,
                Text = title,
                Font = Enum.Font.GothamSemibold,
                TextSize = 14,
                TextColor3 = BraotUI.CurrentTheme.Text,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, -60, 0, 20),
                Position = UDim2.new(0, 10, 0, 10),
            })

            if desc ~= "" then
                local btnDesc = CreateInstance("TextLabel", {
                    Parent = btnFrame,
                    Text = desc,
                    Font = Enum.Font.Gotham,
                    TextSize = 12,
                    TextColor3 = BraotUI.CurrentTheme.Secondary,
                    BackgroundTransparency = 1,
                    Size = UDim2.new(1, -60, 0, 20),
                    Position = UDim2.new(0, 10, 0, 30),
                })
            end

            local btn = CreateInstance("TextButton", {
                Parent = btnFrame,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, 0, 1, 0),
                Text = "",
            })

            btn.MouseButton1Click:Connect(function()
                RippleEffect(btnFrame)
                callback()
            end)

            btn.MouseEnter:Connect(function()
                Tween(btnFrame, {BackgroundColor3 = BraotUI.CurrentTheme.Highlight}, 0.1)
            end)
            btn.MouseLeave:Connect(function()
                Tween(btnFrame, {BackgroundColor3 = BraotUI.CurrentTheme.Secondary}, 0.1)
            end)

            return btn
        end

        function tab:AddToggle(togOptions)
            local title = togOptions.Title or "Toggle"
            local default = togOptions.Default or false
            local callback = togOptions.Callback or function() end

            local togFrame = CreateInstance("Frame", {
                Parent = tabFrame,
                BackgroundColor3 = BraotUI.CurrentTheme.Secondary,
                Size = UDim2.new(1, -20, 0, 40),
                Position = UDim2.new(0, 10, 0, 0),
            })
            CreateInstance("UICorner", {CornerRadius = UDim.new(0, 6), Parent = togFrame})

            local togTitle = CreateInstance("TextLabel", {
                Parent = togFrame,
                Text = title,
                Font = Enum.Font.GothamSemibold,
                TextSize = 14,
                TextColor3 = BraotUI.CurrentTheme.Text,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, -60, 1, 0),
                Position = UDim2.new(0, 10, 0, 0),
            })

            local togIndicator = CreateInstance("Frame", {
                Parent = togFrame,
                BackgroundColor3 = default and BraotUI.CurrentTheme.Accent or BraotUI.CurrentTheme.Border,
                Size = UDim2.new(0, 30, 0, 16),
                Position = UDim2.new(1, -40, 0.5, -8),
            })
            CreateInstance("UICorner", {CornerRadius = UDim.new(1, 0), Parent = togIndicator})

            local value = default

            local tog = CreateInstance("TextButton", {
                Parent = togFrame,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, 0, 1, 0),
                Text = "",
            })

            tog.MouseButton1Click:Connect(function()
                value = not value
                Tween(togIndicator, {BackgroundColor3 = value and BraotUI.CurrentTheme.Accent or BraotUI.CurrentTheme.Border}, 0.2)
                callback(value)
            end)

            BraotUI.Options[title] = {Value = value, SetValue = function(new) value = new; togIndicator.BackgroundColor3 = value and BraotUI.CurrentTheme.Accent or BraotUI.CurrentTheme.Border end}

            return {
                OnChanged = function(cb) callback = cb end,
                SetValue = BraotUI.Options[title].SetValue
            }
        end

        -- Add more elements similarly: Slider, Dropdown, Colorpicker, Keybind, Input

        function tab:AddSlider(slOptions)
            local title = slOptions.Title or "Slider"
            local desc = slOptions.Description or ""
            local default = slOptions.Default or 0
            local min = slOptions.Min or 0
            local max = slOptions.Max or 100
            local rounding = slOptions.Rounding or 0
            local callback = slOptions.Callback or function() end

            local slFrame = CreateInstance("Frame", {
                Parent = tabFrame,
                BackgroundColor3 = BraotUI.CurrentTheme.Secondary,
                Size = UDim2.new(1, -20, 0, desc == "" and 60 or 80),
                Position = UDim2.new(0, 10, 0, 0),
            })
            CreateInstance("UICorner", {CornerRadius = UDim.new(0, 6), Parent = slFrame})

            local slTitle = CreateInstance("TextLabel", {
                Parent = slFrame,
                Text = title,
                Font = Enum.Font.GothamSemibold,
                TextSize = 14,
                TextColor3 = BraotUI.CurrentTheme.Text,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, 0, 0, 20),
                Position = UDim2.new(0, 10, 0, 10),
            })

            if desc ~= "" then
                local slDesc = CreateInstance("TextLabel", {
                    Parent = slFrame,
                    Text = desc,
                    Font = Enum.Font.Gotham,
                    TextSize = 12,
                    TextColor3 = BraotUI.CurrentTheme.Secondary,
                    BackgroundTransparency = 1,
                    Size = UDim2.new(1, 0, 0, 20),
                    Position = UDim2.new(0, 10, 0, 30),
                })
            end

            local slBar = CreateInstance("Frame", {
                Parent = slFrame,
                BackgroundColor3 = BraotUI.CurrentTheme.Border,
                Size = UDim2.new(1, -20, 0, 4),
                Position = UDim2.new(0, 10, 1, -30),
            })
            CreateInstance("UICorner", {CornerRadius = UDim.new(1, 0), Parent = slBar})

            local slFill = CreateInstance("Frame", {
                Parent = slBar,
                BackgroundColor3 = BraotUI.CurrentTheme.Accent,
                Size = UDim2.new((default - min) / (max - min), 0, 1, 0),
                BorderSizePixel = 0,
            })
            CreateInstance("UICorner", {CornerRadius = UDim.new(1, 0), Parent = slFill})

            local slValue = CreateInstance("TextLabel", {
                Parent = slFrame,
                Text = tostring(default),
                Font = Enum.Font.Gotham,
                TextSize = 12,
                TextColor3 = BraotUI.CurrentTheme.Text,
                BackgroundTransparency = 1,
                Size = UDim2.new(0, 50, 0, 20),
                Position = UDim2.new(1, -60, 1, -50),
            })

            local value = default
            local dragging = false

            local slInput = CreateInstance("TextButton", {
                Parent = slFrame,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, 0, 1, 0),
                Text = "",
            })

            slInput.MouseButton1Down:Connect(function()
                dragging = true
            end)

            UserInputService.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    dragging = false
                end
            end)

            RunService.RenderStepped:Connect(function()
                if dragging then
                    local pos = math.clamp((Mouse.X - slBar.AbsolutePosition.X) / slBar.AbsoluteSize.X, 0, 1)
                    value = math.round((min + (max - min) * pos) * 10^rounding) / 10^rounding
                    slFill.Size = UDim2.new(pos, 0, 1, 0)
                    slValue.Text = tostring(value)
                    callback(value)
                end
            end)

            BraotUI.Options[title] = {Value = value, SetValue = function(new) value = new; slFill.Size = UDim2.new((value - min) / (max - min), 0, 1, 0); slValue.Text = tostring(value) end}

            return {
                OnChanged = function(cb) callback = cb end,
                SetValue = BraotUI.Options[title].SetValue
            }
        end


        return tab
    end

    -- Minimize Keybind
    local minimized = false
    UserInputService.InputBegan:Connect(function(input)
        if input.KeyCode == minimizeKey then
            minimized = not minimized
            if minimized then
                Tween(mainFrame, {Size = UDim2.new(0, size.X.Offset, 0, 40)}, 0.3)
            else
                Tween(mainFrame, {Size = size}, 0.3)
            end
        end
    end)

    -- Dragging
    local dragging = false
    local dragInput
    local dragStart
    local startPos

    titleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = mainFrame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    titleBar.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)

    return window
end

return BraotUI
